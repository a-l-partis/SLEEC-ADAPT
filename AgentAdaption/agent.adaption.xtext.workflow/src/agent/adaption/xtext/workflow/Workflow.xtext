// automatically generated by Xtext
grammar agent.adaption.xtext.workflow.Workflow with org.eclipse.xtext.common.Terminals

import "http://www.example.org/workflowspec" 
import "http://www.eclipse.org/emf/2002/Ecore" as ecore

WorkflowStructure returns WorkflowStructure:
	'WorkflowStructure'
	'{'
		'workflowspec' workflowspec=Workflow
	'}';

Workflow returns Workflow:
	Sequence | Task | Loop | Decision;


MBoolExpr returns MBoolExpr:
	MBoolExpr_Impl | Value | BoolValue | BoolComp | Not | RelComp | Atom;

Sequence returns Sequence:
	'Sequence'
	'{'
		'subworkflows' '{' subworkflows+=Workflow ( "," subworkflows+=Workflow)* '}' 
	'}';

Task returns Task:
	'Task'
	'{'
		'ID' ID=EString
	'}';

Loop returns Loop:
	'Loop'
	'{'
		'loop' loop=GuardedWorkflow
	'}';

Decision returns Decision:
	'Decision'
	'{'
		'options' '{' options+=GuardedWorkflow ( "," options+=GuardedWorkflow)* '}' 
	'}';

EString returns ecore::EString:
	STRING | ID;

GuardedWorkflow returns GuardedWorkflow:
	'GuardedWorkflow'
	'{'
		'body' body=Workflow
		'guard' guard=MBoolExpr
	'}';

MBoolExpr_Impl returns MBoolExpr:
	{MBoolExpr}
	'MBoolExpr'
	;

Value returns Value:
	{Value}
	'Value'
	'{'
		('value' value=EInt)?
	'}';

BoolValue returns BoolValue:
	{BoolValue}
	(value?='value')?
	'BoolValue'
	;

BoolComp returns BoolComp:
	{BoolComp}
	'BoolComp'
	'{'
		('op' op=BoolOp)?
		('right' right=MBoolExpr)?
		('left' left=MBoolExpr)?
	'}';

Not returns Not:
	{Not}
	'Not'
	'{'
		('op' op=EString)?
		('expr' expr=MBoolExpr)?
	'}';

RelComp returns RelComp:
	{RelComp}
	'RelComp'
	'{'
		('op' op=RelOp)?
		('left' left=MBoolExpr)?
		('right' right=MBoolExpr)?
	'}';

Atom returns Atom:
	{Atom}
	'Atom'
	'{'
		('measureID' measureID=EString)?
	'}';

EInt returns ecore::EInt:
	'-'? INT;

EBoolean returns ecore::EBoolean:
	'true' | 'false';

enum BoolOp returns BoolOp:
				AND = 'AND' | OR = 'OR';

enum RelOp returns RelOp:
				LESS_THAN = 'LESS_THAN' | GREATER_THAN = 'GREATER_THAN' | NOT_EQUAL = 'NOT_EQUAL' | LESS_EQUAL = 'LESS_EQUAL' | GREATER_EQUAL = 'GREATER_EQUAL' | EQUAL = 'EQUAL';
