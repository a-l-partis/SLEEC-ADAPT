WorkflowStructure {
	workflowspec Sequence {
		subworkflows {
			Task {
				ID "Undock"
			},
			Task {
				ID "GoToRoom"
			},
			Decision {
				options {
					GuardedWorkflow {
						body Task {
							ID "Skip"
						}
						guard Atom {
							measureID "isADrill"
						}
					},
					GuardedWorkflow {
						body Decision {
							options {
								GuardedWorkflow {
									body Task {
										ID "ReturnToDock"
									}
									guard Atom {
										measureID "emergency"
									}
								},
								GuardedWorkflow{
									body Decision {
										options {
											GuardedWorkflow {
												body Task {
													ID "PauseForTenMinutes"
												}
												guard Atom {
													measureID "userAsleep"
												}
											},
											GuardedWorkflow {
												body Decision {
													options {
														GuardedWorkflow {
															body Task {
																ID "TellUserToOpenWindow"
															}
															guard Atom {
																measureID "userDustAllergy"
															}
														},
														GuardedWorkflow {
															body Decision {
																options {
																	GuardedWorkflow {
																		body Task {
																			ID "WarnUser"
																		}
																		guard Atom {
																			measureID "personPresent"
																		}
																	},
																	GuardedWorkflow {
																		body Task {
																			ID "Skip"
																		}
																		guard Not {
																			op "not"
																			expr Atom {
																				measureID "personPresent"
																			}
																		}
																	}
																}
															}
															guard Not {
																op "not"
																expr Atom {
																	measureID "userDustAllergy"
																}
															}
														}
													}
												}
												guard Not {
													op "not"
													expr Atom {
														measureID "userAsleep"
													}
												}
											}
										}
									}
									guard Not {
										op "not"
										expr Atom {
											measureID "emergency"
										}
									}
								}
							}
						}
						guard Not {
							op "not"
							expr Atom {
								measureID "isADrill"
							}
						}
					}
				}
			},
			Task {
				ID "Vacuum"
			},
			Task {
				ID "beep"
			},
			Task {
				ID "Dock"
			}
		}
		
	}
}